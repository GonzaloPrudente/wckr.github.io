$(function(){(function a(){var d=$(".js-site-content");var o=d.height();var l=$(".js-site-main");var e=l.find("h2");var q=$(".js-site-footer");var g=q.offset().top;
var n=$(".js-site-aside");var p=$(".js-site-nav");var t=p.children("ul");var f=$(".js-affix");var b=f.width();var i=f.height();var r=f.offset().top;var k=$(window).scrollTop();
var s=1;var h,m,j,u,c;e.each(function(){h=e.index(this);m=$(this).text();$(this).attr("id","h2-"+h);t.append('<li><a href="#h2-'+h+'">'+m+"</a></li>");
});t.on("click","li",function(){t.children("li").removeClass("active");$(this).addClass("active");});n.css({height:o+"px"});f.css({width:b+"px"});$(window).on("scroll",function(){k=$(window).scrollTop();
i=f.height();if(k>r&&k<=(g-i)){f.removeClass("affix-bottom").addClass("affix");}else{if(k>r&&k>(g-i)){f.removeClass("affix").addClass("affix-bottom");}else{f.removeClass("affix");
}}e.each(function(){h=e.index(this);c=t.find("li");j=Math.floor($(this).offset().top);h2FirstTop=Math.floor(e.eq(0).offset().top);if(h===e.length-1){u=$("body").height();
}else{u=Math.floor(e.eq(h+1).offset().top);}if(k===0){c.removeClass("active");c.eq(0).addClass("active");}else{if(k>=(j-$(window).height()/2)&&k<(u-$(window).height()/2)){c.removeClass("active");
c.eq(h+s).addClass("active");}}});});})();});